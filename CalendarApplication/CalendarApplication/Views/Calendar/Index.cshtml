@model CalendarApplication.Models.Calendar.EventViewModel

@{
    ViewBag.Title = "Index";
}

@using CalendarApplication.Models.Calendar;
@using CalendarApplication.Models.User;
@using CalendarApplication.Models.Event;

<h2>Events</h2>

<table>
    <tr>
        <td>
            <!-- Paint the current view-mode -->
            @if (Model.Mode == 0)
            {
                @Html.Partial("Month", Model.CurrentModel);
            }
            else if (Model.Mode == 1)
            {
                @Html.Partial("Day", (CalendarDay)Model.CurrentModel);
            }
            else if (Model.Mode == 2)
            {
                @Html.Partial("List", (CalendarList)Model.CurrentModel);
            }
        </td>
        <td>

            @using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl }))
            {
            <fieldset>
                <legend>Change view</legend>

                @Html.Hidden("Mode", Model.Mode)

                <div class="editor-label">
                    @Html.LabelFor(model => model.Year)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.Year)
                    @Html.ValidationMessageFor(model => model.Year)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.Month)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.Month)
                    @Html.ValidationMessageFor(model => model.Month)
                </div>

                @if(Model.Mode != 0)
                {
                    <div class="editor-label">
                        @Html.LabelFor(model => model.Day)
                    </div>
                    <div class="editor-field">
                        @Html.EditorFor(model => model.Day)
                        @Html.ValidationMessageFor(model => model.Day)
                    </div>
                }

                @if(Model.Mode == 2)
                {
                    <div class="editor-label">
                        @Html.LabelFor(model => model.Range)
                    </div>
                    <div class="editor-field">
                        @Html.EditorFor(model => model.Range)
                        @Html.ValidationMessageFor(model => model.Range)
                    </div>
                }
                
                <b>Event States:</b><br />
                @Html.CheckBoxFor(model => Model.ViewState0)
                <span style="color:@BasicEvent.getColor(0)">@BasicEvent.getStateText(0)</span><br />
                @Html.CheckBoxFor(model => Model.ViewState1)
                <span style="color:@BasicEvent.getColor(1)">@BasicEvent.getStateText(1)</span><br />
                @Html.CheckBoxFor(model => Model.ViewState2)
                <span style="color:@BasicEvent.getColor(2)">@BasicEvent.getStateText(2)</span><br />

                <b>Event Types:</b><br />
                @for (int i = 0; i < Model.Eventtypes.Count; i++)
                {
                    <div>
                        @Html.HiddenFor(model => Model.Eventtypes[i].ID)
                        @Html.HiddenFor(model => Model.Eventtypes[i].Name)
                        @Html.CheckBoxFor(model => Model.Eventtypes[i].Selected)
                        @Model.Eventtypes[i].Name
                    </div>
                }
            <input type="submit" value="Submit"/>
            </fieldset>
            }
                
        </td>
    </tr>
</table>